<!doctype html>
<html lang="zh-cn">

<head>
    <meta name="viewport" content="initial-scale=1, user-scalable=0, minimal-ui" charset="UTF-8">
    <title>收藏</title>
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <div class="contaienr outer">
        <div class="inner">
            <div class="list-box p0-15 mt10 lists">
                <div class="weui-panel__bd list list2">
                    <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
                        <div class="weui-media-box__bd">
                            <p class="weui-media-box__desc ">通过观察孩子们的游戏来了解他们 （上）：愿望和意图</p>
                        </div>
                        <div class="weui-media-box__hd">
                            <img class="weui-media-box__thumb" src="./images/pic3.png">
                        </div>
                    </a>
                </div>
                <div class="weui-panel__bd list list2">
                    <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
                        <div class="weui-media-box__bd">
                            <p class="weui-media-box__desc ">通过观察孩子们的游戏来了解他们 （上）：愿望和意图</p>
                        </div>
                        <div class="weui-media-box__hd">
                            <img class="weui-media-box__thumb" src="./images/pic3.png">
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="./js/jquery.min.js"></script>
    <script src="./js/dropload.min.js"></script>
    <script>
        $(function () {
            // dropload
            var dropload = $('.inner').dropload({
                domUp: {
                    domClass: 'dropload-up',
                    domRefresh: '<div class="dropload-refresh">↓下拉刷新</div>',
                    domUpdate: '<div class="dropload-update">↑释放更新</div>',
                    domLoad: '<div class="dropload-load"><span class="loading weui-loading"></span>拼命加载中...</div>'
                },
                domDown: {
                    domClass: 'dropload-down',
                    domRefresh: '<div class="dropload-refresh">↑上拉加载更多</div>',
                    domLoad: '<div class="dropload-load"><span class="loading weui-loading"></span>拼命加载中...</div>',
                    domNoData: '<div class="dropload-noData">暂无数据</div>'
                },
                loadUpFn: function (me) {
                    $.ajax({
                        type: 'GET',
                        url: 'more.json',
                        dataType: 'json',
                        success: function (data) {
                            var result = '';
                            for (var i = 0; i < data.lists.length; i++) {
                                result += '<div class="weui-panel__bd list list2">';
                                result += '<a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">';
                                result += '<div class="weui-media-box__bd">';
                                result += '<p class="weui-media-box__desc ">' + data.lists[i].title + '</p>';
                                result += '</div>';
                                result += '<div class="weui-media-box__hd">';
                                result += '<img src="' + data.lists[i].pic + '"">';
                                result += '</div>';
                                result += '</a>';
                                result += '</div>';
                            }
                            // 为了测试，延迟1秒加载
                            setTimeout(function () {
                                $('.lists').html(result);
                                // 每次数据加载完，必须重置
                                dropload.resetload();
                            }, 1000);
                        },
                        error: function (xhr, type) {
                            alert('Ajax error!');
                            // 即使加载出错，也得重置
                            dropload.resetload();
                        }
                    });
                },
                loadDownFn: function (me) {
                    $.ajax({
                        type: 'GET',
                        url: 'more.json',
                        dataType: 'json',
                        success: function (data) {
                            var result = '';
                            for (var i = 0; i < data.lists.length; i++) {
                                result += '<div class="weui-panel__bd list list2">';
                                result += '<a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">';
                                result += '<div class="weui-media-box__bd">';
                                result += '<p class="weui-media-box__desc ">' + data.lists[i].title + '</p>';
                                result += '</div>';
                                result += '<div class="weui-media-box__hd">';
                                result += '<img src="' + data.lists[i].pic + '" alt="">';
                                result += '</div>';
                                result += '</a>';
                                result += '</div>';
                            }
                            // 为了测试，延迟1秒加载
                            setTimeout(function () {
                                $('.lists').append(result);
                                // 每次数据加载完，必须重置
                                dropload.resetload();
                            }, 1000);
                        },
                        error: function (xhr, type) {
                            alert('Ajax error!');
                            // 即使加载出错，也得重置
                            dropload.resetload();
                        }
                    });
                }
            });
        });
    </script>
</body>

</html>